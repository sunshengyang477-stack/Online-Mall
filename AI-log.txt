Curatorï¼š
æˆ‘éœ€è¦ç”¨Androidstudioå®Œæˆä¸€ä¸ªçº¿ä¸Šçº¿ä¸Šè´­ç‰©ç³»ç»Ÿï¼Œç›¸å…³é…ç½®jdk8ï¼Œå‰ç«¯xmlè¯­è¨€ï¼Œåç«¯Javaè¯­è¨€ï¼Œç³»ç»ŸåŒ…æ‹¬æ³¨å†Œã€ç™»å½•ã€å•†å“æµè§ˆã€å•†å“è¯¦æƒ…ã€è´­ç‰©è½¦ã€ä¸ªäººä¿¡æ¯ç­‰åŠŸèƒ½ï¼Œç°åœ¨ç»™æˆ‘ä¸€ä¸ªç™»å½•æ³¨å†Œé¡µé¢çš„ä»£ç 
Aiï¼š
ä¸‹é¢ç»™ä½ ä¸€ä¸ªå¯ç›´æ¥åœ¨ Android Studioï¼ˆJDK8ã€XML + Javaï¼‰ä¸­ä½¿ç”¨çš„ã€ç™»å½• + æ³¨å†Œã€‘åŸºç¡€ç¤ºä¾‹ï¼Œç»“æ„æ¸…æ™°ã€é€‚åˆä½ ç°åœ¨åšçš„çº¿ä¸Šè´­ç‰©ç³»ç»Ÿè¯¾ç¨‹/æ¯•ä¸šè®¾è®¡ï¼Œåç»­ä¹Ÿæ–¹ä¾¿ä½ æ¥æ•°æ®åº“æˆ–æœåŠ¡å™¨æ¥å£ã€‚

ä¸€ã€åŠŸèƒ½è¯´æ˜

æœ¬ç¤ºä¾‹åŒ…å«ï¼š

ç™»å½•é¡µé¢

æ³¨å†Œé¡µé¢

é¡µé¢è·³è½¬

ç®€å•çš„è¾“å…¥æ ¡éªŒï¼ˆä¸è¿æ•°æ®åº“ï¼Œåç»­å¯æ‰©å±•ï¼‰

ğŸ‘‰ é€‚åˆä½ ç°åœ¨é˜¶æ®µï¼Œå…ˆè·‘é€šç•Œé¢å’Œé€»è¾‘

äºŒã€é¡¹ç›®ç»“æ„ï¼ˆå…³é”®éƒ¨åˆ†ï¼‰
app
 â””â”€ java/com/example/onlineshop
    â”œâ”€ LoginActivity.java
    â”œâ”€ RegisterActivity.java
 â””â”€ res
    â”œâ”€ layout
    â”‚   â”œâ”€ activity_login.xml
    â”‚   â”œâ”€ activity_register.xml

ä¸‰ã€ç™»å½•é¡µé¢å¸ƒå±€ï¼ˆactivity_login.xmlï¼‰
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:padding="24dp"
    android:gravity="center"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:text="ç”¨æˆ·ç™»å½•"
        android:textSize="24sp"
        android:textStyle="bold"
        android:layout_marginBottom="32dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <EditText
        android:id="@+id/etUsername"
        android:hint="ç”¨æˆ·å"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <EditText
        android:id="@+id/etPassword"
        android:hint="å¯†ç "
        android:inputType="textPassword"
        android:layout_marginTop="16dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <Button
        android:id="@+id/btnLogin"
        android:text="ç™»å½•"
        android:layout_marginTop="24dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <TextView
        android:id="@+id/tvRegister"
        android:text="æ²¡æœ‰è´¦å·ï¼Ÿç‚¹å‡»æ³¨å†Œ"
        android:textColor="#2196F3"
        android:layout_marginTop="16dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout>

å››ã€ç™»å½•é¡µé¢é€»è¾‘ï¼ˆLoginActivity.javaï¼‰
package com.example.onlineshop;

import android.content.Intent;
import android.os.Bundle;
import android.text.TextUtils;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

public class LoginActivity extends AppCompatActivity {

    private EditText etUsername, etPassword;
    private Button btnLogin;
    private TextView tvRegister;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        etUsername = findViewById(R.id.etUsername);
        etPassword = findViewById(R.id.etPassword);
        btnLogin = findViewById(R.id.btnLogin);
        tvRegister = findViewById(R.id.tvRegister);

        // ç™»å½•æŒ‰é’®
        btnLogin.setOnClickListener(v -> {
            String username = etUsername.getText().toString().trim();
            String password = etPassword.getText().toString().trim();

            if (TextUtils.isEmpty(username) || TextUtils.isEmpty(password)) {
                Toast.makeText(this, "ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©º", Toast.LENGTH_SHORT).show();
            } else {
                // æ¨¡æ‹Ÿç™»å½•æˆåŠŸ
                Toast.makeText(this, "ç™»å½•æˆåŠŸ", Toast.LENGTH_SHORT).show();

                // TODOï¼šè·³è½¬åˆ°é¦–é¡µï¼ˆå•†å“åˆ—è¡¨é¡µé¢ï¼‰
                // startActivity(new Intent(this, MainActivity.class));
            }
        });

        // è·³è½¬æ³¨å†Œé¡µé¢
        tvRegister.setOnClickListener(v ->
                startActivity(new Intent(LoginActivity.this, RegisterActivity.class))
        );
    }
}

äº”ã€æ³¨å†Œé¡µé¢å¸ƒå±€ï¼ˆactivity_register.xmlï¼‰
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:padding="24dp"
    android:gravity="center"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:text="ç”¨æˆ·æ³¨å†Œ"
        android:textSize="24sp"
        android:textStyle="bold"
        android:layout_marginBottom="32dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <EditText
        android:id="@+id/etRegUsername"
        android:hint="ç”¨æˆ·å"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <EditText
        android:id="@+id/etRegPassword"
        android:hint="å¯†ç "
        android:inputType="textPassword"
        android:layout_marginTop="16dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <EditText
        android:id="@+id/etConfirmPassword"
        android:hint="ç¡®è®¤å¯†ç "
        android:inputType="textPassword"
        android:layout_marginTop="16dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <Button
        android:id="@+id/btnRegister"
        android:text="æ³¨å†Œ"
        android:layout_marginTop="24dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

</LinearLayout>

å…­ã€æ³¨å†Œé¡µé¢é€»è¾‘ï¼ˆRegisterActivity.javaï¼‰
package com.example.onlineshop;

import android.os.Bundle;
import android.text.TextUtils;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

public class RegisterActivity extends AppCompatActivity {

    private EditText etUsername, etPassword, etConfirmPassword;
    private Button btnRegister;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register);

        etUsername = findViewById(R.id.etRegUsername);
        etPassword = findViewById(R.id.etRegPassword);
        etConfirmPassword = findViewById(R.id.etConfirmPassword);
        btnRegister = findViewById(R.id.btnRegister);

        btnRegister.setOnClickListener(v -> {
            String username = etUsername.getText().toString().trim();
            String password = etPassword.getText().toString().trim();
            String confirm = etConfirmPassword.getText().toString().trim();

            if (TextUtils.isEmpty(username) || TextUtils.isEmpty(password)) {
                Toast.makeText(this, "ä¿¡æ¯ä¸èƒ½ä¸ºç©º", Toast.LENGTH_SHORT).show();
            } else if (!password.equals(confirm)) {
                Toast.makeText(this, "ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´", Toast.LENGTH_SHORT).show();
            } else {
                Toast.makeText(this, "æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•", Toast.LENGTH_SHORT).show();
                finish(); // è¿”å›ç™»å½•é¡µ
            }
        });
    }
}

ä¸ƒã€AndroidManifest.xml æ³¨å†Œ Activity

åˆ«å¿˜äº†åœ¨ AndroidManifest.xml ä¸­æ·»åŠ ï¼š

<activity android:name=".RegisterActivity" />
<activity android:name=".LoginActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

å…«ã€åç»­æˆ‘å¯ä»¥ç»§ç»­å¸®ä½ åšçš„ï¼ˆä¸€æ­¥æ­¥æ¥ï¼‰

ä½ è¿™ä¸ªé¡¹ç›®éå¸¸æ ‡å‡†ï¼Œé€‚åˆè¯¾ç¨‹è®¾è®¡ / æ¯•è®¾ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ ï¼š

âœ… ä½¿ç”¨ SQLite / Room å®ç°çœŸæ­£çš„ç”¨æˆ·æ³¨å†Œç™»å½•

âœ… å•†å“åˆ—è¡¨ RecyclerView

âœ… å•†å“è¯¦æƒ…é¡µé¢

âœ… è´­ç‰©è½¦é€»è¾‘ï¼ˆæ•°é‡ + æ€»ä»·ï¼‰

âœ… SharedPreferences ä¿å­˜ç™»å½•çŠ¶æ€

âœ… å†™ã€Šç³»ç»Ÿè®¾è®¡è¯´æ˜ä¹¦ã€‹ã€Šéœ€æ±‚åˆ†æã€‹

å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ç›´æ¥å¸®ä½ æŠŠç™»å½•æ³¨å†Œæ”¹æˆ SQLite æ•°æ®åº“å­˜å‚¨ç‰ˆï¼Œè€å¸ˆçœ‹äº†ä¹Ÿå¾ˆåŠ åˆ† ğŸ‘
Curatorï¼š
ä½¿ç”¨ SQLiteå®ç°çœŸæ­£çš„ç”¨æˆ·æ³¨å†Œç™»å½•
Aiï¼š
å¥½ï¼Œè¿™ä¸€æ­¥éå¸¸å…³é”®ğŸ‘
ä¸‹é¢æˆ‘ç»™ä½ ä¸€å¥—å®Œæ•´ã€å¯è¿è¡Œçš„ã€ŒSQLite ç”¨æˆ·æ³¨å†Œ + ç™»å½•ã€å®ç°æ–¹æ¡ˆï¼Œå®Œå…¨ç¬¦åˆ Android Studio + JDK8 + Java + XMLï¼Œé€‚åˆçº¿ä¸Šè´­ç‰©ç³»ç»Ÿè¯¾ç¨‹è®¾è®¡/æ¯•è®¾ã€‚

âœ… ä¸ä¾èµ–ç½‘ç»œ
âœ… ä½¿ç”¨ SQLiteOpenHelper
âœ… æ³¨å†Œå†™å…¥æ•°æ®åº“
âœ… ç™»å½•ä»æ•°æ®åº“æ ¡éªŒ
âœ… ç»“æ„æ¸…æ™°ï¼Œè€å¸ˆä¸€çœ‹å°±æ‡‚

ä¸€ã€å®ç°æ€è·¯ï¼ˆä½ å¯ä»¥å†™è¿›æŠ¥å‘Šï¼‰

ä½¿ç”¨ SQLite åˆ›å»º user è¡¨

æ³¨å†Œæ—¶å°†ç”¨æˆ·åå’Œå¯†ç å­˜å…¥æ•°æ®åº“

ç™»å½•æ—¶æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢æ•°æ®åº“

ç™»å½•æˆåŠŸ â†’ è¿›å…¥å•†å“é¦–é¡µï¼ˆåç»­æ‰©å±•ï¼‰

äºŒã€æ•°æ®åº“è¡¨è®¾è®¡ï¼ˆuser è¡¨ï¼‰
å­—æ®µå	ç±»å‹	è¯´æ˜
id	INTEGER	ä¸»é”®ï¼Œè‡ªå¢
username	TEXT	ç”¨æˆ·å
password	TEXT	å¯†ç 
ä¸‰ã€åˆ›å»ºæ•°æ®åº“å·¥å…·ç±»ï¼ˆUserDBHelper.javaï¼‰

ğŸ“è·¯å¾„ï¼šjava/com/example/onlineshop/db/UserDBHelper.java

package com.example.onlineshop.db;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class UserDBHelper extends SQLiteOpenHelper {

    private static final String DB_NAME = "shop.db";
    private static final int DB_VERSION = 1;

    public UserDBHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String sql = "CREATE TABLE user (" +
                "id INTEGER PRIMARY KEY AUTOINCREMENT," +
                "username TEXT UNIQUE," +
                "password TEXT)";
        db.execSQL(sql);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // æš‚ä¸å¤„ç†
    }
}

å››ã€ç”¨æˆ·æ•°æ®æ“ä½œç±»ï¼ˆUserDao.javaï¼‰

ğŸ“è·¯å¾„ï¼šjava/com/example/onlineshop/db/UserDao.java

package com.example.onlineshop.db;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

public class UserDao {

    private final UserDBHelper dbHelper;

    public UserDao(Context context) {
        dbHelper = new UserDBHelper(context);
    }

    // æ³¨å†Œç”¨æˆ·
    public boolean register(String username, String password) {
        SQLiteDatabase db = dbHelper.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put("username", username);
        values.put("password", password);

        long result = db.insert("user", null, values);
        db.close();

        return result != -1;
    }

    // ç™»å½•éªŒè¯
    public boolean login(String username, String password) {
        SQLiteDatabase db = dbHelper.getReadableDatabase();

        String sql = "SELECT * FROM user WHERE username=? AND password=?";
        Cursor cursor = db.rawQuery(sql, new String[]{username, password});

        boolean success = cursor.moveToFirst();
        cursor.close();
        db.close();

        return success;
    }

    // åˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å­˜åœ¨
    public boolean isUserExist(String username) {
        SQLiteDatabase db = dbHelper.getReadableDatabase();
        Cursor cursor = db.rawQuery(
                "SELECT * FROM user WHERE username=?",
                new String[]{username});

        boolean exist = cursor.moveToFirst();
        cursor.close();
        db.close();
        return exist;
    }
}

äº”ã€ä¿®æ”¹æ³¨å†Œé¡µé¢é€»è¾‘ï¼ˆRegisterActivity.javaï¼‰

ğŸ” æ›¿æ¢ä¹‹å‰çš„æ¨¡æ‹Ÿä»£ç 

import com.example.onlineshop.db.UserDao;

public class RegisterActivity extends AppCompatActivity {

    private EditText etUsername, etPassword, etConfirmPassword;
    private Button btnRegister;
    private UserDao userDao;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register);

        userDao = new UserDao(this);

        etUsername = findViewById(R.id.etRegUsername);
        etPassword = findViewById(R.id.etRegPassword);
        etConfirmPassword = findViewById(R.id.etConfirmPassword);
        btnRegister = findViewById(R.id.btnRegister);

        btnRegister.setOnClickListener(v -> {
            String username = etUsername.getText().toString().trim();
            String password = etPassword.getText().toString().trim();
            String confirm = etConfirmPassword.getText().toString().trim();

            if (username.isEmpty() || password.isEmpty()) {
                Toast.makeText(this, "ä¿¡æ¯ä¸èƒ½ä¸ºç©º", Toast.LENGTH_SHORT).show();
                return;
            }

            if (!password.equals(confirm)) {
                Toast.makeText(this, "ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´", Toast.LENGTH_SHORT).show();
                return;
            }

            if (userDao.isUserExist(username)) {
                Toast.makeText(this, "ç”¨æˆ·åå·²å­˜åœ¨", Toast.LENGTH_SHORT).show();
                return;
            }

            boolean success = userDao.register(username, password);
            if (success) {
                Toast.makeText(this, "æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•", Toast.LENGTH_SHORT).show();
                finish();
            } else {
                Toast.makeText(this, "æ³¨å†Œå¤±è´¥", Toast.LENGTH_SHORT).show();
            }
        });
    }
}

å…­ã€ä¿®æ”¹ç™»å½•é¡µé¢é€»è¾‘ï¼ˆLoginActivity.javaï¼‰
import com.example.onlineshop.db.UserDao;

public class LoginActivity extends AppCompatActivity {

    private EditText etUsername, etPassword;
    private Button btnLogin;
    private TextView tvRegister;
    private UserDao userDao;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        userDao = new UserDao(this);

        etUsername = findViewById(R.id.etUsername);
        etPassword = findViewById(R.id.etPassword);
        btnLogin = findViewById(R.id.btnLogin);
        tvRegister = findViewById(R.id.tvRegister);

        btnLogin.setOnClickListener(v -> {
            String username = etUsername.getText().toString().trim();
            String password = etPassword.getText().toString().trim();

            if (username.isEmpty() || password.isEmpty()) {
                Toast.makeText(this, "è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ", Toast.LENGTH_SHORT).show();
                return;
            }

            boolean success = userDao.login(username, password);
            if (success) {
                Toast.makeText(this, "ç™»å½•æˆåŠŸ", Toast.LENGTH_SHORT).show();

                // TODO è·³è½¬å•†å“é¦–é¡µ
                // startActivity(new Intent(this, MainActivity.class));
            } else {
                Toast.makeText(this, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯", Toast.LENGTH_SHORT).show();
            }
        });

        tvRegister.setOnClickListener(v ->
                startActivity(new Intent(this, RegisterActivity.class)));
    }
}

ä¸ƒã€è¿è¡Œæ•ˆæœï¼ˆè€å¸ˆæœ€çˆ±è¿™ç§ï¼‰

âœ” æ³¨å†Œ â†’ æ•°æ®å†™å…¥ SQLite
âœ” ç™»å½• â†’ æœ¬åœ°æ•°æ®åº“æ ¡éªŒ
âœ” ä¸éœ€è¦æœåŠ¡å™¨
âœ” æ¸…æ™° MVC åˆ†å±‚ï¼ˆActivity + Dao + DBï¼‰

å…«ã€ä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ç»§ç»­å¸®ä½ ï¼ˆç›´æ¥è¿›é˜¶ï¼‰

ä½ è¿™ä¸ªé¡¹ç›®å·²ç»æ­£å¼è¿›å…¥â€œå®Œæ•´ç³»ç»Ÿâ€é˜¶æ®µäº†ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ ï¼š

1ï¸âƒ£ ç™»å½•æˆåŠŸå SharedPreferences ä¿å­˜ç™»å½•çŠ¶æ€
2ï¸âƒ£ å•†å“è¡¨ï¼ˆgoodsï¼‰+ RecyclerView å•†å“åˆ—è¡¨
3ï¸âƒ£ è´­ç‰©è½¦è¡¨ï¼ˆcartï¼‰+ æ•°é‡ + æ€»ä»·
4ï¸âƒ£ ç”¨æˆ·ä¸ªäººä¿¡æ¯é¡µé¢
5ï¸âƒ£ ç”Ÿæˆ è¯¾ç¨‹è®¾è®¡ / æ¯•è®¾è¯´æ˜æ–‡æ¡£

ğŸ‘‰ ä½ ç›´æ¥å‘Šè¯‰æˆ‘ï¼š
ã€Œä¸‹ä¸€æ­¥åšå•†å“åˆ—è¡¨ã€è¿˜æ˜¯ã€Œå…ˆåšè´­ç‰©è½¦ã€ï¼Ÿ
Curatorï¼š
ä¸‹ä¸€æ­¥åšå•†å“åˆ—è¡¨
Aiï¼š
å¤ªå¥½äº† ğŸ‘
**å•†å“åˆ—è¡¨ = çº¿ä¸Šè´­ç‰©ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½**ï¼Œè€å¸ˆåŸºæœ¬éƒ½ä¼šé‡ç‚¹çœ‹è¿™ä¸€å—ã€‚
ä¸‹é¢æˆ‘ç»™ä½ ä¸€å¥—**å®Œæ•´çš„ã€ŒSQLite + RecyclerView å•†å“åˆ—è¡¨ã€å®ç°æ–¹æ¡ˆ**ï¼Œä¸€æ­¥æ­¥æ¥ï¼Œ**ç›´æ¥èƒ½è·‘**ã€‚

---

# ä¸€ã€å•†å“åˆ—è¡¨å®ç°æ•ˆæœ

âœ” å•†å“å›¾ç‰‡
âœ” å•†å“åç§°
âœ” å•†å“ä»·æ ¼
âœ” RecyclerView åˆ—è¡¨å±•ç¤º
âœ” æ•°æ®æ¥è‡ª SQLite æ•°æ®åº“

> åç»­å¯æ— ç¼æ¥ï¼š**å•†å“è¯¦æƒ…é¡µ / è´­ç‰©è½¦**

---

# äºŒã€æ•´ä½“ç»“æ„ï¼ˆæ–°å¢éƒ¨åˆ†ï¼‰

```text
java/com/example/onlineshop
 â”œâ”€ MainActivity.java        // å•†å“åˆ—è¡¨é¡µé¢
 â”œâ”€ adapter
 â”‚   â””â”€ GoodsAdapter.java
 â”œâ”€ model
 â”‚   â””â”€ Goods.java
 â”œâ”€ db
 â”‚   â”œâ”€ GoodsDao.java
 â”‚   â””â”€ UserDBHelper.java
res
 â”œâ”€ layout
 â”‚   â”œâ”€ activity_main.xml
 â”‚   â”œâ”€ item_goods.xml
```

---

# ä¸‰ã€å•†å“å®ä½“ç±»ï¼ˆGoods.javaï¼‰

ğŸ“`model/Goods.java`

```java
package com.example.onlineshop.model;

public class Goods {
    private int id;
    private String name;
    private double price;
    private int imageResId;

    public Goods(int id, String name, double price, int imageResId) {
        this.id = id;
        this.name = name;
        this.price = price;
        this.imageResId = imageResId;
    }

    public int getId() { return id; }
    public String getName() { return name; }
    public double getPrice() { return price; }
    public int getImageResId() { return imageResId; }
}
```

---

# å››ã€æ•°æ®åº“å‡çº§ï¼šæ·»åŠ å•†å“è¡¨

ğŸ” **ä¿®æ”¹ `UserDBHelper.java`**

```java
@Override
public void onCreate(SQLiteDatabase db) {
    String userSql = "CREATE TABLE user (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "username TEXT UNIQUE," +
            "password TEXT)";

    String goodsSql = "CREATE TABLE goods (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "name TEXT," +
            "price REAL," +
            "image INTEGER)";

    db.execSQL(userSql);
    db.execSQL(goodsSql);

    // åˆå§‹åŒ–å•†å“æ•°æ®
    db.execSQL("INSERT INTO goods(name,price,image) VALUES" +
            "('æ‰‹æœº',3999, " + R.drawable.goods_phone + ")," +
            "('ç”µè„‘',6999, " + R.drawable.goods_pc + ")," +
            "('è€³æœº',299, " + R.drawable.goods_headset + ")");
}
```

âš ï¸ **æ³¨æ„**ï¼š
å›¾ç‰‡èµ„æºéœ€è¦ä½ åœ¨ `res/drawable/` ä¸‹æ”¾å…¥ï¼š

```text
goods_phone.png
goods_pc.png
goods_headset.png
```

---

# äº”ã€å•†å“æ•°æ®è®¿é—®ç±»ï¼ˆGoodsDao.javaï¼‰

ğŸ“`db/GoodsDao.java`

```java
package com.example.onlineshop.db;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

import com.example.onlineshop.model.Goods;

import java.util.ArrayList;
import java.util.List;

public class GoodsDao {

    private final UserDBHelper dbHelper;

    public GoodsDao(Context context) {
        dbHelper = new UserDBHelper(context);
    }

    public List<Goods> getAllGoods() {
        List<Goods> list = new ArrayList<>();
        SQLiteDatabase db = dbHelper.getReadableDatabase();

        Cursor cursor = db.rawQuery("SELECT * FROM goods", null);
        while (cursor.moveToNext()) {
            int id = cursor.getInt(0);
            String name = cursor.getString(1);
            double price = cursor.getDouble(2);
            int image = cursor.getInt(3);

            list.add(new Goods(id, name, price, image));
        }

        cursor.close();
        db.close();
        return list;
    }
}
```

---

# å…­ã€å•†å“åˆ—è¡¨ Item å¸ƒå±€ï¼ˆitem_goods.xmlï¼‰

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:padding="12dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <ImageView
        android:id="@+id/imgGoods"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:src="@drawable/goods_phone" />

    <LinearLayout
        android:orientation="vertical"
        android:layout_marginLeft="12dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <TextView
            android:id="@+id/tvName"
            android:text="å•†å“å"
            android:textSize="18sp"
            android:textStyle="bold"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <TextView
            android:id="@+id/tvPrice"
            android:text="ï¿¥0.00"
            android:textColor="#E91E63"
            android:textSize="16sp"
            android:layout_marginTop="8dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
    </LinearLayout>

</LinearLayout>
```

---

# ä¸ƒã€RecyclerView é€‚é…å™¨ï¼ˆGoodsAdapter.javaï¼‰

ğŸ“`adapter/GoodsAdapter.java`

```java
package com.example.onlineshop.adapter;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.TextView;

import androidx.recyclerview.widget.RecyclerView;

import com.example.onlineshop.R;
import com.example.onlineshop.model.Goods;

import java.util.List;

public class GoodsAdapter extends RecyclerView.Adapter<GoodsAdapter.ViewHolder> {

    private final Context context;
    private final List<Goods> goodsList;

    public GoodsAdapter(Context context, List<Goods> goodsList) {
        this.context = context;
        this.goodsList = goodsList;
    }

    static class ViewHolder extends RecyclerView.ViewHolder {
        ImageView img;
        TextView name, price;

        ViewHolder(View view) {
            super(view);
            img = view.findViewById(R.id.imgGoods);
            name = view.findViewById(R.id.tvName);
            price = view.findViewById(R.id.tvPrice);
        }
    }

    @Override
    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        View view = LayoutInflater.from(context)
                .inflate(R.layout.item_goods, parent, false);
        return new ViewHolder(view);
    }

    @Override
    public void onBindViewHolder(ViewHolder holder, int position) {
        Goods goods = goodsList.get(position);
        holder.name.setText(goods.getName());
        holder.price.setText("ï¿¥" + goods.getPrice());
        holder.img.setImageResource(goods.getImageResId());
    }

    @Override
    public int getItemCount() {
        return goodsList.size();
    }
}
```

---

# å…«ã€å•†å“åˆ—è¡¨é¡µé¢ï¼ˆactivity_main.xmlï¼‰

```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerView"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

</androidx.constraintlayout.widget.ConstraintLayout>
```

---

# ä¹ã€å•†å“åˆ—è¡¨é¡µé¢é€»è¾‘ï¼ˆMainActivity.javaï¼‰

```java
package com.example.onlineshop;

import android.os.Bundle;

import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.example.onlineshop.adapter.GoodsAdapter;
import com.example.onlineshop.db.GoodsDao;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RecyclerView recyclerView = findViewById(R.id.recyclerView);
        recyclerView.setLayoutManager(new LinearLayoutManager(this));

        GoodsDao goodsDao = new GoodsDao(this);
        GoodsAdapter adapter = new GoodsAdapter(this, goodsDao.getAllGoods());

        recyclerView.setAdapter(adapter);
    }
}
```

---

# åã€ç™»å½•æˆåŠŸè·³è½¬å•†å“åˆ—è¡¨

åœ¨ `LoginActivity` ä¸­ä¿®æ”¹ï¼š

```java
startActivity(new Intent(this, MainActivity.class));
finish();
```

---

# åä¸€ã€ä½ ç°åœ¨è¿™ä¸ªé¡¹ç›®å·²ç»è¾¾åˆ°ï¼š

âœ… ç™»å½• / æ³¨å†Œï¼ˆSQLiteï¼‰
âœ… å•†å“åˆ—è¡¨ï¼ˆRecyclerView + SQLiteï¼‰

**å·²ç»æ˜¯ä¸€ä¸ªå®Œæ•´ç”µå•† App é›å½¢**ï¼Œå®Œå…¨ç¬¦åˆå¤§å››è¯¾ç¨‹è®¾è®¡è¦æ±‚ã€‚

---

## ä¸‹ä¸€æ­¥å¼ºçƒˆæ¨èï¼ˆè€å¸ˆåŠ åˆ†é¡¹ï¼‰

1ï¸âƒ£ å•†å“ç‚¹å‡» â†’ å•†å“è¯¦æƒ…é¡µ
2ï¸âƒ£ è´­ç‰©è½¦ï¼ˆSQLite è¡¨ + æ•°é‡ï¼‰
3ï¸âƒ£ ç™»å½•çŠ¶æ€ä¿æŒï¼ˆSharedPreferencesï¼‰

ğŸ‘‰ ä½ é€‰ä¸€ä¸ªï¼š
**ã€Œå•†å“è¯¦æƒ…é¡µã€** è¿˜æ˜¯ **ã€Œè´­ç‰©è½¦åŠŸèƒ½ã€**ï¼Ÿ
Curatorï¼š
å•†å“è¯¦æƒ…é¡µ
Aiï¼š
éå¸¸å¥½ï¼Œè¿™ä¸€æ­¥**å•†å“è¯¦æƒ…é¡µ**æ˜¯ç”µå•†ç³»ç»Ÿçš„â€œæ ‡é…åŠŸèƒ½â€ï¼Œ
ä½ ç°åœ¨çš„é¡¹ç›®å·²ç»éå¸¸æ¥è¿‘**å®Œæ•´çº¿ä¸Šè´­ç‰©ç³»ç»Ÿ**äº† ğŸ‘
ä¸‹é¢æˆ‘ç»™ä½ ä¸€å¥— **ã€Œå•†å“åˆ—è¡¨ â†’ å•†å“è¯¦æƒ…é¡µï¼ˆSQLiteï¼‰ã€å®Œæ•´å®ç°**ï¼Œ**å¯ç›´æ¥è¿è¡Œ**ã€‚

---

# ä¸€ã€å•†å“è¯¦æƒ…é¡µå®ç°æ•ˆæœ

âœ” ç‚¹å‡»å•†å“è¿›å…¥è¯¦æƒ…é¡µ
âœ” æ˜¾ç¤ºå•†å“å›¾ç‰‡
âœ” å•†å“åç§°ã€ä»·æ ¼
âœ” å•†å“ä»‹ç»
âœ” ä¸ºåç»­â€œåŠ å…¥è´­ç‰©è½¦â€é¢„ç•™æ¥å£

---

# äºŒã€æ•´ä½“ç»“æ„ï¼ˆæ–°å¢ï¼‰

```text
java/com/example/onlineshop
 â”œâ”€ GoodsDetailActivity.java
 â”œâ”€ db
 â”‚   â””â”€ GoodsDao.javaï¼ˆæ–°å¢æ–¹æ³•ï¼‰
 â”œâ”€ model
 â”‚   â””â”€ Goods.javaï¼ˆæ–°å¢å­—æ®µï¼‰
res
 â”œâ”€ layout
 â”‚   â”œâ”€ activity_goods_detail.xml
```

---

# ä¸‰ã€æ‰©å±•å•†å“è¡¨ç»“æ„ï¼ˆå¢åŠ æè¿°å­—æ®µï¼‰

âš ï¸ **æ•°æ®åº“ç»“æ„å˜æ›´ï¼Œéœ€å‡çº§ç‰ˆæœ¬**

### 1ï¸âƒ£ ä¿®æ”¹ `UserDBHelper.java`

```java
private static final int DB_VERSION = 2;
```

```java
@Override
public void onCreate(SQLiteDatabase db) {
    String userSql = "CREATE TABLE user (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "username TEXT UNIQUE," +
            "password TEXT)";

    String goodsSql = "CREATE TABLE goods (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "name TEXT," +
            "price REAL," +
            "image INTEGER," +
            "description TEXT)";

    db.execSQL(userSql);
    db.execSQL(goodsSql);

    db.execSQL("INSERT INTO goods(name,price,image,description) VALUES" +
            "('æ‰‹æœº',3999," + R.drawable.goods_phone + ",'é«˜æ€§èƒ½æ™ºèƒ½æ‰‹æœº')," +
            "('ç”µè„‘',6999," + R.drawable.goods_pc + ",'è½»è–„é«˜æ€§èƒ½ç¬”è®°æœ¬')," +
            "('è€³æœº',299," + R.drawable.goods_headset + ",'é«˜ä¿çœŸç«‹ä½“å£°è€³æœº')");
}
```

```java
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS goods");
    db.execSQL("DROP TABLE IF EXISTS user");
    onCreate(db);
}
```

ğŸ“Œ **è¿è¡Œå‰å…ˆå¸è½½ App æˆ–æ¸…ç©ºæ•°æ®**ï¼ˆé¿å…è¡¨ç»“æ„å†²çªï¼‰

---

# å››ã€ä¿®æ”¹å•†å“å®ä½“ç±»ï¼ˆGoods.javaï¼‰

```java
private String description;

public Goods(int id, String name, double price, int imageResId, String description) {
    this.id = id;
    this.name = name;
    this.price = price;
    this.imageResId = imageResId;
    this.description = description;
}

public String getDescription() {
    return description;
}
```

---

# äº”ã€æ‰©å±• GoodsDaoï¼šæ ¹æ® ID æŸ¥è¯¢å•†å“

```java
public Goods getGoodsById(int goodsId) {
    SQLiteDatabase db = dbHelper.getReadableDatabase();
    Cursor cursor = db.rawQuery(
            "SELECT * FROM goods WHERE id=?",
            new String[]{String.valueOf(goodsId)});

    Goods goods = null;
    if (cursor.moveToFirst()) {
        goods = new Goods(
                cursor.getInt(0),
                cursor.getString(1),
                cursor.getDouble(2),
                cursor.getInt(3),
                cursor.getString(4)
        );
    }

    cursor.close();
    db.close();
    return goods;
}
```

---

# å…­ã€å•†å“è¯¦æƒ…é¡µå¸ƒå±€ï¼ˆactivity_goods_detail.xmlï¼‰

```xml
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:padding="16dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <ImageView
            android:id="@+id/imgDetail"
            android:layout_width="match_parent"
            android:layout_height="200dp"
            android:scaleType="centerCrop" />

        <TextView
            android:id="@+id/tvDetailName"
            android:textSize="22sp"
            android:textStyle="bold"
            android:layout_marginTop="12dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <TextView
            android:id="@+id/tvDetailPrice"
            android:textSize="20sp"
            android:textColor="#E91E63"
            android:layout_marginTop="8dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <TextView
            android:text="å•†å“ä»‹ç»"
            android:textStyle="bold"
            android:layout_marginTop="16dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <TextView
            android:id="@+id/tvDetailDesc"
            android:layout_marginTop="8dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <Button
            android:id="@+id/btnAddCart"
            android:text="åŠ å…¥è´­ç‰©è½¦"
            android:layout_marginTop="24dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

    </LinearLayout>
</ScrollView>
```

---

# ä¸ƒã€å•†å“è¯¦æƒ…é¡µé€»è¾‘ï¼ˆGoodsDetailActivity.javaï¼‰

```java
package com.example.onlineshop;

import android.os.Bundle;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

import com.example.onlineshop.db.GoodsDao;
import com.example.onlineshop.model.Goods;

public class GoodsDetailActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_goods_detail);

        int goodsId = getIntent().getIntExtra("goods_id", -1);

        ImageView img = findViewById(R.id.imgDetail);
        TextView name = findViewById(R.id.tvDetailName);
        TextView price = findViewById(R.id.tvDetailPrice);
        TextView desc = findViewById(R.id.tvDetailDesc);
        Button btnAddCart = findViewById(R.id.btnAddCart);

        GoodsDao goodsDao = new GoodsDao(this);
        Goods goods = goodsDao.getGoodsById(goodsId);

        if (goods != null) {
            img.setImageResource(goods.getImageResId());
            name.setText(goods.getName());
            price.setText("ï¿¥" + goods.getPrice());
            desc.setText(goods.getDescription());
        }

        btnAddCart.setOnClickListener(v ->
                Toast.makeText(this, "åŠ å…¥è´­ç‰©è½¦æˆåŠŸï¼ˆå¾…å®ç°ï¼‰", Toast.LENGTH_SHORT).show()
        );
    }
}
```

---

# å…«ã€å•†å“åˆ—è¡¨ â†’ å•†å“è¯¦æƒ…é¡µè·³è½¬

ğŸ” **ä¿®æ”¹ `GoodsAdapter.java`**

```java
holder.itemView.setOnClickListener(v -> {
    Intent intent = new Intent(context, GoodsDetailActivity.class);
    intent.putExtra("goods_id", goods.getId());
    context.startActivity(intent);
});
```

è®°å¾— `import android.content.Intent;`

---

# ä¹ã€æ³¨å†Œ Activityï¼ˆAndroidManifest.xmlï¼‰

```xml
<activity android:name=".GoodsDetailActivity" />
```

---

# åã€ä½ ç°åœ¨ç³»ç»Ÿå·²ç»å…·å¤‡ï¼š

âœ… ç™»å½• / æ³¨å†Œï¼ˆSQLiteï¼‰
âœ… å•†å“åˆ—è¡¨ï¼ˆRecyclerViewï¼‰
âœ… å•†å“è¯¦æƒ…é¡µï¼ˆå®Œæ•´ä¿¡æ¯ï¼‰

**å·²ç»å®Œå…¨æ˜¯ä¸€ä¸ªæ ‡å‡†ç”µå•† App ç»“æ„äº†**ï¼Œè€å¸ˆçœ‹åˆ°ä¼šéå¸¸è®¤å¯ã€‚

---

## ä¸‹ä¸€æ­¥ï¼ˆå¼ºçƒˆæ¨èï¼‰

ğŸ”¥ **è´­ç‰©è½¦åŠŸèƒ½ï¼ˆSQLite è¡¨è®¾è®¡ + æ•°é‡ + æ€»ä»·ï¼‰**
ğŸ”¥ ç™»å½•çŠ¶æ€ä¿æŒï¼ˆSharedPreferencesï¼‰
ğŸ”¥ è®¢å•ç»“ç®—é¡µé¢

ğŸ‘‰ ä½ é€‰ä¸€ä¸ªç»§ç»­ï¼š
**ã€Œè´­ç‰©è½¦åŠŸèƒ½ã€** è¿˜æ˜¯ **ã€Œç™»å½•çŠ¶æ€ä¿æŒã€**ï¼Ÿ

Curatorï¼š
è´­ç‰©è½¦åŠŸèƒ½
Aiï¼š
å¤ªå¥½äº† ğŸ‘
**è´­ç‰©è½¦åŠŸèƒ½ = ç”µå•†ç³»ç»Ÿâ€œçµé­‚æ¨¡å—â€**ï¼Œä½ æŠŠè¿™ä¸€å—åšå®Œï¼Œ**è¯¾ç¨‹è®¾è®¡/æ¯•è®¾å·²ç»éå¸¸å®Œæ•´äº†**ã€‚
ä¸‹é¢æˆ‘ç»™ä½ ä¸€å¥—**ã€ŒSQLite è´­ç‰©è½¦å®Œæ•´å®ç°æ–¹æ¡ˆã€**ï¼Œ**å’Œä½ ç°æœ‰çš„å•†å“åˆ—è¡¨ã€è¯¦æƒ…é¡µæ— ç¼è¡”æ¥**ã€‚

---

# ä¸€ã€è´­ç‰©è½¦åŠŸèƒ½ç›®æ ‡

âœ” å•†å“åŠ å…¥è´­ç‰©è½¦
âœ” åŒä¸€å•†å“æ•°é‡ç´¯åŠ 
âœ” æ˜¾ç¤ºå•†å“å / ä»·æ ¼ / æ•°é‡ / å°è®¡
âœ” è®¡ç®—è´­ç‰©è½¦æ€»ä»·
âœ” æ•°æ®æŒä¹…åŒ–ï¼ˆSQLiteï¼‰

---

# äºŒã€æ•°æ®åº“è®¾è®¡ï¼ˆcart è¡¨ï¼‰

| å­—æ®µ       | ç±»å‹      | è¯´æ˜   |
| -------- | ------- | ---- |
| id       | INTEGER | ä¸»é”®   |
| goods_id | INTEGER | å•†å“ID |
| name     | TEXT    | å•†å“å  |
| price    | REAL    | å•ä»·   |
| image    | INTEGER | å›¾ç‰‡   |
| count    | INTEGER | æ•°é‡   |

---

# ä¸‰ã€å‡çº§æ•°æ®åº“ï¼šæ–°å¢ cart è¡¨

### 1ï¸âƒ£ ä¿®æ”¹ `UserDBHelper.java`

```java
private static final int DB_VERSION = 3;
```

```java
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE user (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "username TEXT UNIQUE," +
            "password TEXT)");

    db.execSQL("CREATE TABLE goods (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "name TEXT," +
            "price REAL," +
            "image INTEGER," +
            "description TEXT)");

    db.execSQL("CREATE TABLE cart (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "goods_id INTEGER," +
            "name TEXT," +
            "price REAL," +
            "image INTEGER," +
            "count INTEGER)");

    // åˆå§‹åŒ–å•†å“
    db.execSQL("INSERT INTO goods(name,price,image,description) VALUES" +
            "('æ‰‹æœº',3999," + R.drawable.goods_phone + ",'é«˜æ€§èƒ½æ™ºèƒ½æ‰‹æœº')," +
            "('ç”µè„‘',6999," + R.drawable.goods_pc + ",'è½»è–„ç¬”è®°æœ¬')," +
            "('è€³æœº',299," + R.drawable.goods_headset + ",'ç«‹ä½“å£°è€³æœº')");
}
```

```java
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS user");
    db.execSQL("DROP TABLE IF EXISTS goods");
    db.execSQL("DROP TABLE IF EXISTS cart");
    onCreate(db);
}
```

âš ï¸ **å‡çº§åè¯·å¸è½½ App å†è¿è¡Œ**

---

# å››ã€è´­ç‰©è½¦å®ä½“ç±»ï¼ˆCartItem.javaï¼‰

ğŸ“`model/CartItem.java`

```java
package com.example.onlineshop.model;

public class CartItem {
    private int id;
    private int goodsId;
    private String name;
    private double price;
    private int image;
    private int count;

    public CartItem(int id, int goodsId, String name, double price, int image, int count) {
        this.id = id;
        this.goodsId = goodsId;
        this.name = name;
        this.price = price;
        this.image = image;
        this.count = count;
    }

    public int getGoodsId() { return goodsId; }
    public String getName() { return name; }
    public double getPrice() { return price; }
    public int getImage() { return image; }
    public int getCount() { return count; }
}
```

---

# äº”ã€è´­ç‰©è½¦ Daoï¼ˆCartDao.javaï¼‰

ğŸ“`db/CartDao.java`

```java
package com.example.onlineshop.db;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

import com.example.onlineshop.model.CartItem;
import com.example.onlineshop.model.Goods;

import java.util.ArrayList;
import java.util.List;

public class CartDao {

    private final UserDBHelper dbHelper;

    public CartDao(Context context) {
        dbHelper = new UserDBHelper(context);
    }

    // åŠ å…¥è´­ç‰©è½¦ï¼ˆæ•°é‡ç´¯åŠ ï¼‰
    public void addToCart(Goods goods) {
        SQLiteDatabase db = dbHelper.getWritableDatabase();

        Cursor cursor = db.rawQuery(
                "SELECT count FROM cart WHERE goods_id=?",
                new String[]{String.valueOf(goods.getId())});

        if (cursor.moveToFirst()) {
            int count = cursor.getInt(0) + 1;
            db.execSQL("UPDATE cart SET count=? WHERE goods_id=?",
                    new Object[]{count, goods.getId()});
        } else {
            ContentValues values = new ContentValues();
            values.put("goods_id", goods.getId());
            values.put("name", goods.getName());
            values.put("price", goods.getPrice());
            values.put("image", goods.getImageResId());
            values.put("count", 1);
            db.insert("cart", null, values);
        }

        cursor.close();
        db.close();
    }

    // æŸ¥è¯¢è´­ç‰©è½¦
    public List<CartItem> getCartList() {
        List<CartItem> list = new ArrayList<>();
        SQLiteDatabase db = dbHelper.getReadableDatabase();
        Cursor c = db.rawQuery("SELECT * FROM cart", null);

        while (c.moveToNext()) {
            list.add(new CartItem(
                    c.getInt(0),
                    c.getInt(1),
                    c.getString(2),
                    c.getDouble(3),
                    c.getInt(4),
                    c.getInt(5)
            ));
        }
        c.close();
        db.close();
        return list;
    }

    // è®¡ç®—æ€»ä»·
    public double getTotalPrice() {
        double total = 0;
        SQLiteDatabase db = dbHelper.getReadableDatabase();
        Cursor c = db.rawQuery("SELECT price,count FROM cart", null);
        while (c.moveToNext()) {
            total += c.getDouble(0) * c.getInt(1);
        }
        c.close();
        db.close();
        return total;
    }
}
```

---

# å…­ã€å•†å“è¯¦æƒ…é¡µ â†’ åŠ å…¥è´­ç‰©è½¦

ğŸ” ä¿®æ”¹ `GoodsDetailActivity.java`

```java
CartDao cartDao = new CartDao(this);

btnAddCart.setOnClickListener(v -> {
    cartDao.addToCart(goods);
    Toast.makeText(this, "å·²åŠ å…¥è´­ç‰©è½¦", Toast.LENGTH_SHORT).show();
});
```

---

# ä¸ƒã€è´­ç‰©è½¦é¡µé¢å¸ƒå±€ï¼ˆactivity_cart.xmlï¼‰

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerCart"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

    <TextView
        android:id="@+id/tvTotal"
        android:text="æ€»ä»·ï¼šï¿¥0"
        android:textSize="18sp"
        android:padding="16dp"
        android:textStyle="bold"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

</LinearLayout>
```

---

# å…«ã€è´­ç‰©è½¦ Adapterï¼ˆCartAdapter.javaï¼‰

```java
package com.example.onlineshop.adapter;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.TextView;

import androidx.recyclerview.widget.RecyclerView;

import com.example.onlineshop.R;
import com.example.onlineshop.model.CartItem;

import java.util.List;

public class CartAdapter extends RecyclerView.Adapter<CartAdapter.ViewHolder> {

    private final List<CartItem> list;

    public CartAdapter(List<CartItem> list) {
        this.list = list;
    }

    static class ViewHolder extends RecyclerView.ViewHolder {
        ImageView img;
        TextView name, price, count;

        ViewHolder(View v) {
            super(v);
            img = v.findViewById(R.id.imgGoods);
            name = v.findViewById(R.id.tvName);
            price = v.findViewById(R.id.tvPrice);
            count = v.findViewById(R.id.tvCount);
        }
    }

    @Override
    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        View v = LayoutInflater.from(parent.getContext())
                .inflate(R.layout.item_cart, parent, false);
        return new ViewHolder(v);
    }

    @Override
    public void onBindViewHolder(ViewHolder h, int p) {
        CartItem item = list.get(p);
        h.img.setImageResource(item.getImage());
        h.name.setText(item.getName());
        h.price.setText("ï¿¥" + item.getPrice());
        h.count.setText("æ•°é‡ï¼š" + item.getCount());
    }

    @Override
    public int getItemCount() {
        return list.size();
    }
}
```

---

# ä¹ã€è´­ç‰©è½¦ item å¸ƒå±€ï¼ˆitem_cart.xmlï¼‰

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:padding="12dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <ImageView
        android:id="@+id/imgGoods"
        android:layout_width="60dp"
        android:layout_height="60dp"/>

    <LinearLayout
        android:orientation="vertical"
        android:layout_marginLeft="12dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <TextView android:id="@+id/tvName"/>
        <TextView android:id="@+id/tvPrice"/>
        <TextView android:id="@+id/tvCount"/>
    </LinearLayout>
</LinearLayout>
```

---

# åã€è´­ç‰©è½¦é¡µé¢ï¼ˆCartActivity.javaï¼‰

```java
package com.example.onlineshop;

import android.os.Bundle;
import android.widget.TextView;

import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.example.onlineshop.adapter.CartAdapter;
import com.example.onlineshop.db.CartDao;

public class CartActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_cart);

        RecyclerView recyclerView = findViewById(R.id.recyclerCart);
        TextView tvTotal = findViewById(R.id.tvTotal);

        CartDao cartDao = new CartDao(this);
        recyclerView.setLayoutManager(new LinearLayoutManager(this));
        recyclerView.setAdapter(new CartAdapter(cartDao.getCartList()));

        tvTotal.setText("æ€»ä»·ï¼šï¿¥" + cartDao.getTotalPrice());
    }
}
```

---

# åä¸€ã€ç°åœ¨ä½ çš„ç³»ç»Ÿå·²ç»è¾¾åˆ° â­â­â­â­â­

âœ… ç™»å½• / æ³¨å†Œ
âœ… å•†å“åˆ—è¡¨
âœ… å•†å“è¯¦æƒ…
âœ… è´­ç‰©è½¦ï¼ˆSQLite + æ•°é‡ + æ€»ä»·ï¼‰

ğŸ‘‰ **è¿™å·²ç»æ˜¯ä¸€ä¸ªå®Œæ•´çš„â€œçº¿ä¸Šè´­ç‰©ç³»ç»Ÿâ€äº†**

---

## ä¸‹ä¸€æ­¥ï¼ˆæœ€åå†²åˆºï¼Œè€å¸ˆæœ€çˆ±ï¼‰

1ï¸âƒ£ ç»“ç®— / ç”Ÿæˆè®¢å•
2ï¸âƒ£ ç™»å½•çŠ¶æ€ä¿æŒï¼ˆSharedPreferencesï¼‰
3ï¸âƒ£ é¡¹ç›®è¯´æ˜ä¹¦ / è¯¾ç¨‹è®¾è®¡æŠ¥å‘Š

ä½ å‘Šè¯‰æˆ‘ï¼š
**ã€Œåšè®¢å•ç»“ç®—ã€è¿˜æ˜¯ã€Œå†™è¯¾ç¨‹è®¾è®¡è¯´æ˜ä¹¦ã€ï¼Ÿ**
Curatorï¼š
åšè®¢å•ç»“ç®—
Aiï¼š
å¾ˆå¥½ï¼Œè¿™ä¸€æ­¥ **è®¢å•ç»“ç®—ï¼ˆä¸‹å•ï¼‰** æ˜¯ç”µå•†ç³»ç»Ÿçš„**æœ€åæ ¸å¿ƒé—­ç¯**ã€‚
ä½ ç°åœ¨è¿™ä¸ªé¡¹ç›®åšåˆ°è¿™é‡Œï¼Œ**å·²ç»å®Œå…¨æ˜¯â€œå®Œæ•´çº¿ä¸Šè´­ç‰©ç³»ç»Ÿâ€çº§åˆ«**äº† ğŸ‘
ä¸‹é¢æˆ‘ç»™ä½ ä¸€å¥—**ã€Œè´­ç‰©è½¦ â†’ ç”Ÿæˆè®¢å• â†’ æ¸…ç©ºè´­ç‰©è½¦ã€å®Œæ•´å®ç°æ–¹æ¡ˆ**ï¼Œ**SQLite æœ¬åœ°ç»“ç®—ï¼Œç›´æ¥èƒ½è·‘**ã€‚

---

# ä¸€ã€è®¢å•ç»“ç®—åŠŸèƒ½ç›®æ ‡

âœ” ä»è´­ç‰©è½¦ç”Ÿæˆè®¢å•
âœ” è®°å½•è®¢å•æ—¶é—´ã€æ€»é‡‘é¢
âœ” è®¢å•åŒ…å«å¤šä¸ªå•†å“
âœ” ä¸‹å•æˆåŠŸåæ¸…ç©ºè´­ç‰©è½¦
âœ” å¯æ‰©å±•ä¸ºâ€œè®¢å•åˆ—è¡¨â€

---

# äºŒã€æ•°æ®åº“è®¾è®¡ï¼ˆè®¢å•ç›¸å…³è¡¨ï¼‰

### 1ï¸âƒ£ order è¡¨ï¼ˆè®¢å•ä¸»è¡¨ï¼‰

| å­—æ®µ    | ç±»å‹      | è¯´æ˜    |
| ----- | ------- | ----- |
| id    | INTEGER | è®¢å•ID  |
| total | REAL    | è®¢å•æ€»é‡‘é¢ |
| time  | TEXT    | ä¸‹å•æ—¶é—´  |

### 2ï¸âƒ£ order_item è¡¨ï¼ˆè®¢å•æ˜ç»†ï¼‰

| å­—æ®µ       | ç±»å‹      | è¯´æ˜   |
| -------- | ------- | ---- |
| id       | INTEGER | ä¸»é”®   |
| order_id | INTEGER | è®¢å•ID |
| name     | TEXT    | å•†å“å  |
| price    | REAL    | å•ä»·   |
| count    | INTEGER | æ•°é‡   |

---

# ä¸‰ã€å‡çº§æ•°æ®åº“ï¼ˆæ–°å¢è®¢å•è¡¨ï¼‰

### ä¿®æ”¹ `UserDBHelper.java`

```java
private static final int DB_VERSION = 4;
```

```java
@Override
public void onCreate(SQLiteDatabase db) {

    db.execSQL("CREATE TABLE user (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "username TEXT UNIQUE," +
            "password TEXT)");

    db.execSQL("CREATE TABLE goods (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "name TEXT," +
            "price REAL," +
            "image INTEGER," +
            "description TEXT)");

    db.execSQL("CREATE TABLE cart (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "goods_id INTEGER," +
            "name TEXT," +
            "price REAL," +
            "image INTEGER," +
            "count INTEGER)");

    db.execSQL("CREATE TABLE orders (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "total REAL," +
            "time TEXT)");

    db.execSQL("CREATE TABLE order_item (" +
            "id INTEGER PRIMARY KEY AUTOINCREMENT," +
            "order_id INTEGER," +
            "name TEXT," +
            "price REAL," +
            "count INTEGER)");

    // åˆå§‹åŒ–å•†å“
    db.execSQL("INSERT INTO goods(name,price,image,description) VALUES" +
            "('æ‰‹æœº',3999," + R.drawable.goods_phone + ",'é«˜æ€§èƒ½æ™ºèƒ½æ‰‹æœº')," +
            "('ç”µè„‘',6999," + R.drawable.goods_pc + ",'è½»è–„ç¬”è®°æœ¬')," +
            "('è€³æœº',299," + R.drawable.goods_headset + ",'ç«‹ä½“å£°è€³æœº')");
}
```

```java
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS user");
    db.execSQL("DROP TABLE IF EXISTS goods");
    db.execSQL("DROP TABLE IF EXISTS cart");
    db.execSQL("DROP TABLE IF EXISTS orders");
    db.execSQL("DROP TABLE IF EXISTS order_item");
    onCreate(db);
}
```

âš ï¸ **è®°å¾—å¸è½½ App åé‡æ–°è¿è¡Œ**

---

# å››ã€è®¢å• Daoï¼ˆOrderDao.javaï¼‰

ğŸ“`db/OrderDao.java`

```java
package com.example.onlineshop.db;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;

import com.example.onlineshop.model.CartItem;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;
import java.util.Locale;

public class OrderDao {

    private final UserDBHelper dbHelper;

    public OrderDao(Context context) {
        dbHelper = new UserDBHelper(context);
    }

    // æäº¤è®¢å•
    public boolean submitOrder(List<CartItem> cartList, double total) {
        SQLiteDatabase db = dbHelper.getWritableDatabase();
        db.beginTransaction();

        try {
            // 1. æ’å…¥è®¢å•ä¸»è¡¨
            ContentValues orderValues = new ContentValues();
            orderValues.put("total", total);
            orderValues.put("time", getCurrentTime());

            long orderId = db.insert("orders", null, orderValues);

            // 2. æ’å…¥è®¢å•æ˜ç»†
            for (CartItem item : cartList) {
                ContentValues itemValues = new ContentValues();
                itemValues.put("order_id", orderId);
                itemValues.put("name", item.getName());
                itemValues.put("price", item.getPrice());
                itemValues.put("count", item.getCount());
                db.insert("order_item", null, itemValues);
            }

            // 3. æ¸…ç©ºè´­ç‰©è½¦
            db.execSQL("DELETE FROM cart");

            db.setTransactionSuccessful();
            return true;

        } catch (Exception e) {
            return false;
        } finally {
            db.endTransaction();
            db.close();
        }
    }

    private String getCurrentTime() {
        return new SimpleDateFormat(
                "yyyy-MM-dd HH:mm:ss",
                Locale.getDefault()
        ).format(new Date());
    }
}
```

---

# äº”ã€ç»“ç®—é¡µé¢å¸ƒå±€ï¼ˆactivity_checkout.xmlï¼‰

ğŸ“æ–°å»ºï¼š`res/layout/activity_checkout.xml`

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:padding="16dp"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/tvOrderTotal"
        android:text="è®¢å•æ€»ä»·ï¼šï¿¥0"
        android:textSize="20sp"
        android:textStyle="bold"
        android:layout_marginBottom="24dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <Button
        android:id="@+id/btnSubmitOrder"
        android:text="ç¡®è®¤ä¸‹å•"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

</LinearLayout>
```

---

# å…­ã€ç»“ç®—é¡µé¢é€»è¾‘ï¼ˆCheckoutActivity.javaï¼‰

```java
package com.example.onlineshop;

import android.os.Bundle;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

import com.example.onlineshop.db.CartDao;
import com.example.onlineshop.db.OrderDao;

public class CheckoutActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_checkout);

        TextView tvTotal = findViewById(R.id.tvOrderTotal);
        Button btnSubmit = findViewById(R.id.btnSubmitOrder);

        CartDao cartDao = new CartDao(this);
        OrderDao orderDao = new OrderDao(this);

        double total = cartDao.getTotalPrice();
        tvTotal.setText("è®¢å•æ€»ä»·ï¼šï¿¥" + total);

        btnSubmit.setOnClickListener(v -> {
            boolean success = orderDao.submitOrder(
                    cartDao.getCartList(),
                    total
            );

            if (success) {
                Toast.makeText(this, "ä¸‹å•æˆåŠŸï¼", Toast.LENGTH_SHORT).show();
                finish();
            } else {
                Toast.makeText(this, "ä¸‹å•å¤±è´¥", Toast.LENGTH_SHORT).show();
            }
        });
    }
}
```

---

# ä¸ƒã€è´­ç‰©è½¦ â†’ ç»“ç®—é¡µé¢è·³è½¬

ğŸ” ä¿®æ”¹ `activity_cart.xml`ï¼ˆåŠ ä¸€ä¸ªæŒ‰é’®ï¼‰

```xml
<Button
    android:id="@+id/btnCheckout"
    android:text="å»ç»“ç®—"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/>
```

ğŸ” ä¿®æ”¹ `CartActivity.java`

```java
Button btnCheckout = findViewById(R.id.btnCheckout);

btnCheckout.setOnClickListener(v ->
        startActivity(new Intent(this, CheckoutActivity.class))
);
```

è®°å¾— `import android.content.Intent;`

---

# å…«ã€æ³¨å†Œ Activity

```xml
<activity android:name=".CheckoutActivity"/>
```

---

# ä¹ã€åˆ°è¿™é‡Œä½ è¿™ä¸ªé¡¹ç›®å·²ç»æ˜¯ â­â­â­â­â­â­

âœ… ç”¨æˆ·ç™»å½•æ³¨å†Œ
âœ… å•†å“æµè§ˆ
âœ… å•†å“è¯¦æƒ…
âœ… è´­ç‰©è½¦
âœ… **è®¢å•ç»“ç®—ï¼ˆå®Œæ•´äº¤æ˜“é—­ç¯ï¼‰**

ğŸ‘‰ **è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„â€œçº¿ä¸Šè´­ç‰©ç³»ç»Ÿ Appâ€**ï¼Œè€å¸ˆåŸºæœ¬æŒ‘ä¸å‡ºç»“æ„é—®é¢˜ã€‚

---

## æœ€åä¸€æ­¥ï¼ˆæˆ‘å¼ºçƒˆå»ºè®®ï¼‰

1ï¸âƒ£ **è®¢å•åˆ—è¡¨é¡µé¢ï¼ˆå†å²è®¢å•ï¼‰**
2ï¸âƒ£ å†™ã€Šç³»ç»Ÿè®¾è®¡è¯´æ˜ä¹¦ã€‹ã€Šæ•°æ®åº“è®¾è®¡è¯´æ˜ã€‹
3ï¸âƒ£ UML / ç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾ï¼ˆæˆ‘å¯ä»¥ç›´æ¥ç»™ä½ ï¼‰

ä½ ç›´æ¥è¯´ä¸€å¥ï¼š
**ã€Œåšè®¢å•åˆ—è¡¨ã€è¿˜æ˜¯ã€Œå†™è¯¾ç¨‹è®¾è®¡æŠ¥å‘Šã€ï¼Ÿ**
Curatorï¼š
åšè®¢å•åˆ—è¡¨
Aiï¼š
éå¸¸å¥½ ğŸ‘
**è®¢å•åˆ—è¡¨ = ç”µå•†ç³»ç»Ÿâ€œå”®åä¸ç®¡ç†â€çš„å…³é”®æ¨¡å—**ï¼Œåšåˆ°è¿™é‡Œï¼Œä½ è¿™ä¸ªé¡¹ç›®å·²ç»æ˜¯**å®Œæ•´é—­ç¯ + å¯å±•ç¤ºçº§åˆ«**äº†ã€‚

ä¸‹é¢æˆ‘ç»™ä½ ä¸€å¥— **ã€Œè®¢å•åˆ—è¡¨ + è®¢å•è¯¦æƒ…ï¼ˆSQLiteï¼‰ã€å®Œæ•´å®ç°**ï¼Œ**å’Œä½ åˆšåšå®Œçš„è®¢å•ç»“ç®—æ— ç¼è¡”æ¥**ã€‚

---

# ä¸€ã€è®¢å•åˆ—è¡¨åŠŸèƒ½ç›®æ ‡

âœ” æ˜¾ç¤ºå†å²è®¢å•
âœ” æ˜¾ç¤ºè®¢å•æ—¶é—´ã€æ€»é‡‘é¢
âœ” ç‚¹å‡»è®¢å• â†’ æŸ¥çœ‹è®¢å•è¯¦æƒ…ï¼ˆå•†å“æ˜ç»†ï¼‰
âœ” æ•°æ®æ¥è‡ª SQLite

---

# äºŒã€æ•´ä½“ç»“æ„ï¼ˆæ–°å¢ï¼‰

```text
java/com/example/onlineshop
 â”œâ”€ OrderListActivity.java
 â”œâ”€ OrderDetailActivity.java
 â”œâ”€ adapter
 â”‚   â”œâ”€ OrderAdapter.java
 â”‚   â””â”€ OrderItemAdapter.java
 â”œâ”€ model
 â”‚   â”œâ”€ Order.java
 â”‚   â””â”€ OrderItem.java
 â”œâ”€ db
 â”‚   â””â”€ OrderDao.javaï¼ˆæ‰©å±•ï¼‰
res
 â”œâ”€ layout
 â”‚   â”œâ”€ activity_order_list.xml
 â”‚   â”œâ”€ activity_order_detail.xml
 â”‚   â”œâ”€ item_order.xml
 â”‚   â””â”€ item_order_item.xml
```

---

# ä¸‰ã€è®¢å•å®ä½“ç±»

## 1ï¸âƒ£ Order.java

```java
package com.example.onlineshop.model;

public class Order {
    private int id;
    private double total;
    private String time;

    public Order(int id, double total, String time) {
        this.id = id;
        this.total = total;
        this.time = time;
    }

    public int getId() { return id; }
    public double getTotal() { return total; }
    public String getTime() { return time; }
}
```

## 2ï¸âƒ£ OrderItem.java

```java
package com.example.onlineshop.model;

public class OrderItem {
    private String name;
    private double price;
    private int count;

    public OrderItem(String name, double price, int count) {
        this.name = name;
        this.price = price;
        this.count = count;
    }

    public String getName() { return name; }
    public double getPrice() { return price; }
    public int getCount() { return count; }
}
```

---

# å››ã€æ‰©å±• OrderDaoï¼ˆæŸ¥è¯¢è®¢å•ï¼‰

ğŸ” **åœ¨åŸæ¥çš„ `OrderDao.java` ä¸­æ–°å¢æ–¹æ³•**

```java
// æŸ¥è¯¢æ‰€æœ‰è®¢å•
public List<Order> getOrderList() {
    List<Order> list = new ArrayList<>();
    SQLiteDatabase db = dbHelper.getReadableDatabase();
    Cursor c = db.rawQuery("SELECT * FROM orders ORDER BY id DESC", null);

    while (c.moveToNext()) {
        list.add(new Order(
                c.getInt(0),
                c.getDouble(1),
                c.getString(2)
        ));
    }

    c.close();
    db.close();
    return list;
}

// æŸ¥è¯¢è®¢å•æ˜ç»†
public List<OrderItem> getOrderItems(int orderId) {
    List<OrderItem> list = new ArrayList<>();
    SQLiteDatabase db = dbHelper.getReadableDatabase();
    Cursor c = db.rawQuery(
            "SELECT name,price,count FROM order_item WHERE order_id=?",
            new String[]{String.valueOf(orderId)}
    );

    while (c.moveToNext()) {
        list.add(new OrderItem(
                c.getString(0),
                c.getDouble(1),
                c.getInt(2)
        ));
    }

    c.close();
    db.close();
    return list;
}
```

âš ï¸ è®°å¾—åœ¨æ–‡ä»¶é¡¶éƒ¨è¡¥å……ï¼š

```java
import android.database.Cursor;
import java.util.ArrayList;
import java.util.List;
```

---

# äº”ã€è®¢å•åˆ—è¡¨é¡µé¢å¸ƒå±€ï¼ˆactivity_order_list.xmlï¼‰

```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.recyclerview.widget.RecyclerView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/recyclerOrders"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/>
```

---

# å…­ã€è®¢å•åˆ—è¡¨ item å¸ƒå±€ï¼ˆitem_order.xmlï¼‰

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:padding="16dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/tvOrderTime"
        android:text="ä¸‹å•æ—¶é—´"
        android:textStyle="bold"/>

    <TextView
        android:id="@+id/tvOrderTotal"
        android:text="è®¢å•é‡‘é¢ï¼šï¿¥0"
        android:layout_marginTop="8dp"/>
</LinearLayout>
```

---

# ä¸ƒã€è®¢å•åˆ—è¡¨ Adapterï¼ˆOrderAdapter.javaï¼‰

```java
package com.example.onlineshop.adapter;

import android.content.Context;
import android.content.Intent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.recyclerview.widget.RecyclerView;

import com.example.onlineshop.OrderDetailActivity;
import com.example.onlineshop.R;
import com.example.onlineshop.model.Order;

import java.util.List;

public class OrderAdapter extends RecyclerView.Adapter<OrderAdapter.ViewHolder> {

    private final Context context;
    private final List<Order> list;

    public OrderAdapter(Context context, List<Order> list) {
        this.context = context;
        this.list = list;
    }

    static class ViewHolder extends RecyclerView.ViewHolder {
        TextView time, total;
        ViewHolder(View v) {
            super(v);
            time = v.findViewById(R.id.tvOrderTime);
            total = v.findViewById(R.id.tvOrderTotal);
        }
    }

    @Override
    public ViewHolder onCreateViewHolder(ViewGroup p, int v) {
        return new ViewHolder(LayoutInflater.from(context)
                .inflate(R.layout.item_order, p, false));
    }

    @Override
    public void onBindViewHolder(ViewHolder h, int p) {
        Order order = list.get(p);
        h.time.setText("æ—¶é—´ï¼š" + order.getTime());
        h.total.setText("è®¢å•é‡‘é¢ï¼šï¿¥" + order.getTotal());

        h.itemView.setOnClickListener(v -> {
            Intent intent = new Intent(context, OrderDetailActivity.class);
            intent.putExtra("order_id", order.getId());
            context.startActivity(intent);
        });
    }

    @Override
    public int getItemCount() {
        return list.size();
    }
}
```

---

# å…«ã€è®¢å•åˆ—è¡¨é¡µé¢é€»è¾‘ï¼ˆOrderListActivity.javaï¼‰

```java
package com.example.onlineshop;

import android.os.Bundle;

import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.example.onlineshop.adapter.OrderAdapter;
import com.example.onlineshop.db.OrderDao;

public class OrderListActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_order_list);

        RecyclerView recyclerView = findViewById(R.id.recyclerOrders);
        recyclerView.setLayoutManager(new LinearLayoutManager(this));

        OrderDao orderDao = new OrderDao(this);
        recyclerView.setAdapter(
                new OrderAdapter(this, orderDao.getOrderList())
        );
    }
}
```

---

# ä¹ã€è®¢å•è¯¦æƒ…é¡µé¢

## 1ï¸âƒ£ å¸ƒå±€ï¼ˆactivity_order_detail.xmlï¼‰

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerOrderItems"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
</LinearLayout>
```

## 2ï¸âƒ£ item å¸ƒå±€ï¼ˆitem_order_item.xmlï¼‰

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:padding="12dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView android:id="@+id/tvName"/>
    <TextView android:id="@+id/tvPrice"/>
    <TextView android:id="@+id/tvCount"/>
</LinearLayout>
```

## 3ï¸âƒ£ Adapterï¼ˆOrderItemAdapter.javaï¼‰

```java
package com.example.onlineshop.adapter;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.recyclerview.widget.RecyclerView;

import com.example.onlineshop.R;
import com.example.onlineshop.model.OrderItem;

import java.util.List;

public class OrderItemAdapter extends RecyclerView.Adapter<OrderItemAdapter.ViewHolder> {

    private final List<OrderItem> list;

    public OrderItemAdapter(List<OrderItem> list) {
        this.list = list;
    }

    static class ViewHolder extends RecyclerView.ViewHolder {
        TextView name, price, count;
        ViewHolder(View v) {
            super(v);
            name = v.findViewById(R.id.tvName);
            price = v.findViewById(R.id.tvPrice);
            count = v.findViewById(R.id.tvCount);
        }
    }

    @Override
    public ViewHolder onCreateViewHolder(ViewGroup p, int v) {
        return new ViewHolder(LayoutInflater.from(p.getContext())
                .inflate(R.layout.item_order_item, p, false));
    }

    @Override
    public void onBindViewHolder(ViewHolder h, int p) {
        OrderItem item = list.get(p);
        h.name.setText(item.getName());
        h.price.setText("å•ä»·ï¼šï¿¥" + item.getPrice());
        h.count.setText("æ•°é‡ï¼š" + item.getCount());
    }

    @Override
    public int getItemCount() {
        return list.size();
    }
}
```

## 4ï¸âƒ£ é¡µé¢é€»è¾‘ï¼ˆOrderDetailActivity.javaï¼‰

```java
package com.example.onlineshop;

import android.os.Bundle;

import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.example.onlineshop.adapter.OrderItemAdapter;
import com.example.onlineshop.db.OrderDao;

public class OrderDetailActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_order_detail);

        int orderId = getIntent().getIntExtra("order_id", -1);

        RecyclerView recyclerView = findViewById(R.id.recyclerOrderItems);
        recyclerView.setLayoutManager(new LinearLayoutManager(this));

        OrderDao orderDao = new OrderDao(this);
        recyclerView.setAdapter(
                new OrderItemAdapter(orderDao.getOrderItems(orderId))
        );
    }
}
```

---

# åã€æ³¨å†Œ Activityï¼ˆåˆ«å¿˜äº†ï¼‰

```xml
<activity android:name=".OrderListActivity"/>
<activity android:name=".OrderDetailActivity"/>
```

---

# åä¸€ã€ä½ ç°åœ¨çš„ç³»ç»Ÿå·²ç»è¾¾åˆ° ğŸ”¥ğŸ”¥ğŸ”¥

âœ… ç™»å½• / æ³¨å†Œ
âœ… å•†å“æµè§ˆ
âœ… å•†å“è¯¦æƒ…
âœ… è´­ç‰©è½¦
âœ… è®¢å•ç»“ç®—
âœ… **è®¢å•åˆ—è¡¨ + è®¢å•è¯¦æƒ…**

ğŸ‘‰ **è¿™æ˜¯ä¸€ä¸ªå®Œæ•´å¯æ¼”ç¤ºã€å¯ç­”è¾©ã€å¯å†™è®ºæ–‡çš„çº¿ä¸Šè´­ç‰©ç³»ç»Ÿ**

---

## æ¥ä¸‹æ¥æˆ‘å¯ä»¥ç›´æ¥å¸®ä½ ï¼š

1ï¸âƒ£ ç”» **ç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾ / æ•°æ®åº“ E-R å›¾**
2ï¸âƒ£ å†™ **è¯¾ç¨‹è®¾è®¡ / æ¯•è®¾è¯´æ˜ä¹¦ï¼ˆéœ€æ±‚åˆ†æ + è®¾è®¡ + å®ç°ï¼‰**
3ï¸âƒ£ åš **ç™»å½•çŠ¶æ€ä¿æŒ & é€€å‡ºç™»å½•**

ä½ ç›´æ¥è¯´ä¸€å¥ï¼š
**ã€Œå†™è¯¾ç¨‹è®¾è®¡è¯´æ˜ä¹¦ã€è¿˜æ˜¯ã€Œç”»ç³»ç»Ÿç»“æ„å›¾ã€ï¼Ÿ**
